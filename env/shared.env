# ===============================
# Vecto Pilot â€” Shared Environment Variables
# Used by both webservice and worker deployment modes
# ===============================

# -------------------------------
# Security / Auth
# -------------------------------
AGENT_TOKEN=${AGENT_TOKEN}
EIDOLON_TOKEN=${EIDOLON_TOKEN}
ASSISTANT_OVERRIDE_TOKEN=${ASSISTANT_OVERRIDE_TOKEN}
GW_KEY=${GW_KEY}

OPENAI_API_KEY=${OPENAI_API_KEY}
PERPLEXITY_API_KEY=${PERPLEXITY_API_KEY}
ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}

# -------------------------------
# Google APIs
# -------------------------------
GOOGLE_MAPS_API_KEY=${GOOGLE_MAPS_API_KEY}
GOOGLEAQ_API_KEY=${GOOGLEAQ_API_KEY}
GEMINI_API_KEY=${GEMINI_API_KEY}
GOOGLE_AI_API_KEY=${GOOGLE_AI_API_KEY}

# Frontend Google Maps (required for client-side map rendering)
VITE_GOOGLE_MAPS_API_KEY=${VITE_GOOGLE_MAPS_API_KEY}

# -------------------------------
# Paths & Directories
# -------------------------------
BASE_DIR=/home/runner/workspace
STATE_DIR=./data/state
SNAPSHOT_DIR=./data/snapshots
CONTEXT_CACHE_DIR=./data/cache

# -------------------------------
# Database (Replit PostgreSQL)
# -------------------------------
# Replit automatically provides DATABASE_URL
DATABASE_URL=${DATABASE_URL}

# Connection Pool Configuration (optimized for Replit)
PG_MAX=10
PG_MIN=2
PG_IDLE_TIMEOUT_MS=30000
PG_CONNECTION_TIMEOUT_MS=15000

# -------------------------------
# Core Model Config (GPT-5.1 - Latest, Nov 2025)
# -------------------------------
OPENAI_MODEL=gpt-5.1
OPENAI_REASONING_EFFORT=medium
OPENAI_MAX_COMPLETION_TOKENS=32000
OPENAI_CONTEXT_WINDOW=200000

# Unified Triad Models
AGENT_MODEL=gpt-5.1
ASSISTANT_MODEL=gpt-5.1
EIDOLON_MODEL=gpt-5.1
TRIAD_STRATEGIST_PROVIDER=openai
TRIAD_PLANNER_PROVIDER=openai
TRIAD_VALIDATOR_PROVIDER=openai

# -------------------------------
# Strategy Pipeline Roles
# -------------------------------
# Strategist: Claude generates strategic overview
# Briefer: Perplexity sonar-pro provides structured intelligence
# Consolidator: GPT-5 generates 30-min tactical briefing with web search
STRATEGY_STRATEGIST=claude-sonnet-4-5-20250929
STRATEGY_BRIEFER=sonar-pro
STRATEGY_CONSOLIDATOR=gpt-5.1

# Strategist Parameters (Claude)
STRATEGY_STRATEGIST_MAX_TOKENS=1024
STRATEGY_STRATEGIST_TEMPERATURE=0.2

# Briefer Parameters (Perplexity sonar-pro)
STRATEGY_BRIEFER_MAX_TOKENS=8192
STRATEGY_BRIEFER_TEMPERATURE=0.7

# Consolidator Parameters (GPT-5)
STRATEGY_CONSOLIDATOR_MAX_TOKENS=32000
STRATEGY_CONSOLIDATOR_REASONING_EFFORT=medium

# Holiday Checker (Perplexity - fast/cheap model)
STRATEGY_HOLIDAY_CHECKER=sonar-pro

# -------------------------------
# Single-Path Triad Control
# -------------------------------
TRIAD_ENABLED=true
TRIAD_MODE=single_path
TRIAD_FAIL_ON_INVALID=true
TRIAD_INVARIANT_NO_VENUE_INVENTION=true
TRIAD_INVARIANT_SCHEMA_STRICT=true
TRIAD_INVARIANT_WORD_CAPS=true

# -------------------------------
# Budgets / Deadlines
# -------------------------------
LLM_TOTAL_BUDGET_MS=180000
GPT5_TIMEOUT_MS=300000
PLANNER_DEADLINE_MS=300000
VALIDATOR_DEADLINE_MS=10000

# -------------------------------
# Research & Web Search
# -------------------------------
PERPLEXITY_ENABLED=true
PERPLEXITY_MODEL=sonar-pro
PERPLEXITY_MAX_TOKENS=4096
WEB_SEARCH_ENABLED=true

# Web Search Capabilities (Eidolon, Assistant, Agent)
EIDOLON_WEB_SEARCH=true
EIDOLON_ALLOW_HTTP=true
EIDOLON_PERPLEXITY_ENABLED=true
ASSISTANT_WEB_SEARCH=true
ASSISTANT_ALLOW_HTTP=true
ASSISTANT_PERPLEXITY_ENABLED=true
AGENT_WEB_SEARCH=true
AGENT_PERPLEXITY_ENABLED=true

# -------------------------------
# Agent Server Capabilities
# -------------------------------
AGENT_ALLOW_FS_READ=true
AGENT_ALLOW_FS_WRITE=true
AGENT_ALLOW_FS_DELETE=true
AGENT_ALLOW_SHELL=true
AGENT_SHELL_WHITELIST=*
AGENT_ALLOW_SQL_READ=true
AGENT_ALLOW_SQL_WRITE=true
AGENT_ALLOW_SQL_DDL=true
AGENT_ALLOW_HTTP=true
AGENT_ALLOW_WEBSEARCH=true
AGENT_MAX_MEMORY_MB=4096
AGENT_DESIGN_MODE=true
AGENT_RESEARCH_MODE=true
AGENT_ARCHITECTURE_MODE=true
AGENT_ALLOW_PACKAGE_INSTALL=true
AGENT_ALLOW_DB_MIGRATIONS=true
AGENT_ALLOW_CONFIG_EDIT=true
AGENT_ALLOW_REPLIT_TOOLS=true
AGENT_ENHANCED_CONTEXT=true
AGENT_SEMANTIC_SEARCH=true
AGENT_AUTO_OPTIMIZE=true

# -------------------------------
# Assistant Override
# -------------------------------
ASSISTANT_OVERRIDE_MODE=true
ASSISTANT_ALLOW_FS_READ=true
ASSISTANT_ALLOW_FS_WRITE=true
ASSISTANT_ALLOW_SHELL=true
ASSISTANT_SHELL_WHITELIST=ls,cat,npm,node,git,psql,pg_dump,tar,sed,awk,find
ASSISTANT_ALLOW_SQL_READ=true
ASSISTANT_ALLOW_SQL_WRITE=true
ASSISTANT_PERSIST=true
ASSISTANT_POLICY_PATH=config/assistant-policy.json
AGENT_OVERRIDE_PROVIDER=anthropic
AGENT_OVERRIDE_MODEL=claude-sonnet-4-5-20250929

# -------------------------------
# Memory / Eidolon
# -------------------------------
EIDOLON_OVERRIDE_MODE=true
EIDOLON_ALLOW_FS_READ=true
EIDOLON_ALLOW_FS_WRITE=true
EIDOLON_ALLOW_SHELL=true
EIDOLON_SHELL_WHITELIST=*
EIDOLON_ALLOW_SQL_READ=true
EIDOLON_ALLOW_SQL_WRITE=true
EIDOLON_PERSIST=true
EIDOLON_POLICY_PATH=config/EIDOLON-policy.json
EIDOLON_SEMANTIC_MEMORY=true
EIDOLON_WORKSPACE_AWARENESS=true
EIDOLON_DEEP_REASONING=true
EIDOLON_ENHANCED_MEMORY=true

# -------------------------------
# Advanced Features
# -------------------------------

RESEARCH_MODE_ENABLED=true
AUTO_PERFORMANCE_TUNING=true
ADVANCED_DEBUGGING=true
DEPLOYMENT_AUTOMATION=true

THREAD_MEMORY_FULL_CONTEXT=true
THREAD_MEMORY_UNLIMITED=true
THREAD_CROSS_SESSION_AWARE=true
THREAD_DEEP_HISTORY=true
THREAD_SEMANTIC_LINKING=true
CROSS_THREAD_MEMORY_ENABLED=true
CROSS_THREAD_GLOBAL_CONTEXT=true
AGENT_MEMORY_PERSISTENT=true
AGENT_CROSS_THREAD_AWARE=true
AGENT_UNRESTRICTED=true
EIDOLON_CROSS_THREAD_ACCESS=true
UNIFIED_MEMORY_ARCHITECTURE=true

# -------------------------------
# Value Per Minute Ranking
# -------------------------------
VALUE_BASE_RATE_PER_MIN=1.00
VALUE_DEFAULT_TRIP_MIN=15
VALUE_DEFAULT_WAIT_MIN=0
VALUE_MIN_ACCEPTABLE_PER_MIN=0.50

# -------------------------------
# Lock Settings (for distributed processing)
# -------------------------------
LOCK_TTL_MS=9000
HEARTBEAT_MS=3000
WORKER_ID=replit:primary

# -------------------------------
# Timeouts & Performance (Magic Numbers Centralized)
# -------------------------------
DEFAULT_TIMEOUT_MS=180000
API_TIMEOUT_MS=120000
LLM_TIMEOUT_MS=180000
BROWSER_GPS_TIMEOUT_MS=8000
TRANSIENT_RETRY_TIMEOUT_MS=45000
TRANSIENT_RETRY_MAX_RETRIES=6
JOB_CLEANUP_INTERVAL_MS=3600000
ANTHROPIC_TIMEOUT_MS=60000
LLM_TOTAL_BUDGET_MS=8000
LLM_PRIMARY_TIMEOUT_MS=1200
CIRCUIT_COOLDOWN_MS=60000
RATE_LIMIT_WINDOW_MS=60000
MAX_REQUESTS_PER_WINDOW=10
COMMAND_EXEC_TIMEOUT_MS=15000
CACHE_WINDOW_MINUTES=1

# Proximity & Scoring Thresholds
COORD_DELTA_THRESHOLD_KM=0.5
AIRPORT_PROXIMITY_THRESHOLD_MILES=30
EXPLORATION_RATE=0.2
PROXIMITY_WEIGHT=2.0
RELIABILITY_DEFAULT=0.5
OPEN_PROB_DEFAULT=0.5

# API & Data Limits
MIN_BLOCKS_RECOMMENDED=8
MAX_BLOCKS_LIMIT=50
ROUTES_API_FUTURE_TIME_MS=30000
SEMANTIC_EMBEDDING_SIZE=1536
EARTH_RADIUS_KM=6371

# Worker & Background Jobs
MAX_WORKER_RESTARTS=10
RESTART_BACKOFF_MS=5000

# Anthropic Thinking Tokens (by effort level)
ANTHROPIC_THINKING_LOW=1000
ANTHROPIC_THINKING_MEDIUM=5000
ANTHROPIC_THINKING_HIGH=10000

# Replit Metadata
REPL_ID=${REPL_ID}
REPL_OWNER=${REPL_OWNER}
REPLIT_DEV_DOMAIN=${REPLIT_DEV_DOMAIN}
REPL_SLUG=${REPL_SLUG}
