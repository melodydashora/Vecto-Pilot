# ===============================
# Vecto Pilot â€” Webservice Deployment Mode
# For Replit Autoscale deployments (HTTP/WebSocket only)
# ===============================
# IMPORTANT: This mode does NOT run background workers
# Background processing should be handled by a separate worker deployment
# ===============================

# -------------------------------
# Deployment Mode
# -------------------------------
APP_MODE=mono
NODE_ENV=production

# -------------------------------
# Server Configuration
# -------------------------------
PORT=5000
GATEWAY_PORT=5000
AGENT_PORT=43717

# -------------------------------
# Service Embedding (Webservice Mode)
# -------------------------------
# Disable spawning SDK and Agent as child processes
# In webservice mode, we embed SDK routes directly into gateway
DISABLE_SPAWN_SDK=1
DISABLE_SPAWN_AGENT=1

# -------------------------------
# API & WebSocket Paths
# -------------------------------
API_PREFIX=/api
AGENT_PREFIX=/agent
WS_PUBLIC_PATH=/agent/ws
SOCKET_IO_PATH=/socket.io

# -------------------------------
# Background Worker Control
# -------------------------------
# Enable background worker for strategy generation
# Worker runs in same process for Reserved VM deployments
ENABLE_BACKGROUND_WORKER=true
USE_LISTEN_MODE=true

# -------------------------------
# Agent Server Base URL & Capabilities
# -------------------------------
AGENT_BASE_URL=http://127.0.0.1:${AGENT_PORT}

# Enhanced Context Awareness
AGENT_ENHANCED_CONTEXT=true
AGENT_DEEP_CONTEXT_ANALYSIS=true
AGENT_WORKSPACE_AWARENESS=true
AGENT_PROJECT_STATE_TRACKING=true
AGENT_CONVERSATION_MEMORY=true
AGENT_SEMANTIC_SEARCH=true
AGENT_CODE_MAP_ENABLED=true
AGENT_DEPLOYMENT_TRACKING=true

# Memory & Thread Awareness
AGENT_MEMORY_PERSISTENT=true
AGENT_CROSS_THREAD_AWARE=true
AGENT_THREAD_CONTEXT_ENABLED=true
AGENT_THREAD_HISTORY_DEPTH=200
AGENT_ENTITY_EXTRACTION=true
AGENT_TOPIC_DISCOVERY=true
AGENT_DECISION_TRACKING=true

# Auto-Learning & Optimization
AGENT_AUTO_OPTIMIZE=true
AGENT_PATTERN_RECOGNITION=true
AGENT_INTERACTION_LEARNING=true
AGENT_WEB_SEARCH=true
AGENT_PERPLEXITY_ENABLED=true

# -------------------------------
# Assistant - Full Capabilities (Same as Agent)
# -------------------------------
ASSISTANT_OVERRIDE_MODE=true
ASSISTANT_ALLOW_FS_READ=true
ASSISTANT_ALLOW_FS_WRITE=true
ASSISTANT_ALLOW_FS_DELETE=true
ASSISTANT_ALLOW_SHELL=true
ASSISTANT_SHELL_WHITELIST=*
ASSISTANT_ALLOW_SQL_READ=true
ASSISTANT_ALLOW_SQL_WRITE=true
ASSISTANT_ALLOW_SQL_DDL=true
ASSISTANT_ALLOW_HTTP=true
ASSISTANT_ALLOW_WEBSEARCH=true
ASSISTANT_ALLOW_PACKAGE_INSTALL=true
ASSISTANT_ALLOW_DB_MIGRATIONS=true
ASSISTANT_ALLOW_CONFIG_EDIT=true
ASSISTANT_ALLOW_REPLIT_TOOLS=true
ASSISTANT_PERSIST=true
ASSISTANT_POLICY_PATH=config/assistant-policy.json
ASSISTANT_MAX_MEMORY_MB=4096
ASSISTANT_DESIGN_MODE=true
ASSISTANT_RESEARCH_MODE=true
ASSISTANT_ARCHITECTURE_MODE=true
ASSISTANT_ENHANCED_CONTEXT=true
ASSISTANT_DEEP_CONTEXT_ANALYSIS=true
ASSISTANT_WORKSPACE_AWARENESS=true
ASSISTANT_PROJECT_STATE_TRACKING=true
ASSISTANT_CONVERSATION_MEMORY=true
ASSISTANT_SEMANTIC_SEARCH=true
ASSISTANT_CODE_MAP_ENABLED=true
ASSISTANT_DEPLOYMENT_TRACKING=true
ASSISTANT_MEMORY_PERSISTENT=true
ASSISTANT_CROSS_THREAD_AWARE=true
ASSISTANT_THREAD_CONTEXT_ENABLED=true
ASSISTANT_THREAD_HISTORY_DEPTH=200
ASSISTANT_ENTITY_EXTRACTION=true
ASSISTANT_TOPIC_DISCOVERY=true
ASSISTANT_DECISION_TRACKING=true
ASSISTANT_AUTO_OPTIMIZE=true
ASSISTANT_PATTERN_RECOGNITION=true
ASSISTANT_INTERACTION_LEARNING=true
ASSISTANT_UNRESTRICTED=true
ASSISTANT_WEB_SEARCH=true
ASSISTANT_PERPLEXITY_ENABLED=true

# -------------------------------
# Eidolon - Full Capabilities (Same as Agent/Assistant)
# -------------------------------
EIDOLON_OVERRIDE_MODE=true
EIDOLON_BASE_URL=http://127.0.0.1:${AGENT_PORT}
EIDOLON_ALLOW_FS_READ=true
EIDOLON_ALLOW_FS_WRITE=true
EIDOLON_ALLOW_FS_DELETE=true
EIDOLON_ALLOW_SHELL=true
EIDOLON_SHELL_WHITELIST=*
EIDOLON_ALLOW_SQL_READ=true
EIDOLON_ALLOW_SQL_WRITE=true
EIDOLON_ALLOW_SQL_DDL=true
EIDOLON_ALLOW_HTTP=true
EIDOLON_ALLOW_WEBSEARCH=true
EIDOLON_ALLOW_PACKAGE_INSTALL=true
EIDOLON_ALLOW_DB_MIGRATIONS=true
EIDOLON_ALLOW_CONFIG_EDIT=true
EIDOLON_ALLOW_REPLIT_TOOLS=true
EIDOLON_PERSIST=true
EIDOLON_POLICY_PATH=config/EIDOLON-policy.json
EIDOLON_MAX_MEMORY_MB=4096
EIDOLON_DESIGN_MODE=true
EIDOLON_RESEARCH_MODE=true
EIDOLON_ARCHITECTURE_MODE=true
EIDOLON_ENHANCED_CONTEXT=true
EIDOLON_DEEP_CONTEXT_ANALYSIS=true
EIDOLON_WORKSPACE_AWARENESS=true
EIDOLON_PROJECT_STATE_TRACKING=true
EIDOLON_CONVERSATION_MEMORY=true
EIDOLON_SEMANTIC_SEARCH=true
EIDOLON_CODE_MAP_ENABLED=true
EIDOLON_DEPLOYMENT_TRACKING=true
EIDOLON_MEMORY_PERSISTENT=true
EIDOLON_CROSS_THREAD_AWARE=true
EIDOLON_CROSS_THREAD_ACCESS=true
EIDOLON_THREAD_CONTEXT_ENABLED=true
EIDOLON_THREAD_HISTORY_DEPTH=200
EIDOLON_ENTITY_EXTRACTION=true
EIDOLON_TOPIC_DISCOVERY=true
EIDOLON_DECISION_TRACKING=true
EIDOLON_AUTO_OPTIMIZE=true
EIDOLON_PATTERN_RECOGNITION=true
EIDOLON_INTERACTION_LEARNING=true
EIDOLON_UNRESTRICTED=true
EIDOLON_SEMANTIC_MEMORY=true
EIDOLON_DEEP_REASONING=true
EIDOLON_ENHANCED_MEMORY=true
EIDOLON_WEB_SEARCH=true
EIDOLON_PERPLEXITY_ENABLED=true

# -------------------------------
# Bootstrap Testing (Development Only)
# -------------------------------
# Disable job seeding in production webservice mode
SEED_JOB_ON_BOOT=false

# -------------------------------
# Database Pool Configuration (Replit PostgreSQL)
# -------------------------------
# Optimized for Replit's connection handling
PG_MAX=10
PG_MIN=2
PG_IDLE_TIMEOUT_MS=30000
