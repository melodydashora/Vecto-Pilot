# ===============================
# Vecto Pilot â€” Webservice Deployment Mode
# For Replit Autoscale deployments (HTTP/WebSocket only)
# ===============================
# IMPORTANT: This mode does NOT run background workers
# Background processing should be handled by a separate worker deployment
# ===============================

# -------------------------------
# Deployment Mode
# -------------------------------
APP_MODE=mono
NODE_ENV=production

# -------------------------------
# Server Configuration
# -------------------------------
PORT=5000
GATEWAY_PORT=5000
AGENT_PORT=43717

# -------------------------------
# Service Embedding (Webservice Mode)
# -------------------------------
# Disable spawning SDK and Agent as child processes
# In webservice mode, we embed SDK routes directly into gateway
DISABLE_SPAWN_SDK=1
DISABLE_SPAWN_AGENT=1

# -------------------------------
# API & WebSocket Paths
# -------------------------------
API_PREFIX=/api
AGENT_PREFIX=/agent
WS_PUBLIC_PATH=/agent/ws
SOCKET_IO_PATH=/socket.io

# -------------------------------
# Background Worker Control
# -------------------------------
# Enable background worker for strategy generation
# Worker runs in same process for Reserved VM deployments
ENABLE_BACKGROUND_WORKER=true
USE_LISTEN_MODE=true

# -------------------------------
# Agent Server Base URL & Capabilities
# -------------------------------
AGENT_BASE_URL=http://127.0.0.1:${AGENT_PORT}

# Enhanced Context Awareness
AGENT_ENHANCED_CONTEXT=true
AGENT_DEEP_CONTEXT_ANALYSIS=true
AGENT_WORKSPACE_AWARENESS=true
AGENT_PROJECT_STATE_TRACKING=true
AGENT_CONVERSATION_MEMORY=true
AGENT_SEMANTIC_SEARCH=true
AGENT_CODE_MAP_ENABLED=true
AGENT_DEPLOYMENT_TRACKING=true

# Memory & Thread Awareness
AGENT_MEMORY_PERSISTENT=true
AGENT_CROSS_THREAD_AWARE=true
AGENT_THREAD_CONTEXT_ENABLED=true
AGENT_THREAD_HISTORY_DEPTH=200
AGENT_ENTITY_EXTRACTION=true
AGENT_TOPIC_DISCOVERY=true
AGENT_DECISION_TRACKING=true

# Auto-Learning & Optimization
AGENT_AUTO_OPTIMIZE=true
AGENT_PATTERN_RECOGNITION=true
AGENT_INTERACTION_LEARNING=true
AGENT_WEB_SEARCH=true
AGENT_PERPLEXITY_ENABLED=true

# -------------------------------
# Bootstrap Testing (Development Only)
# -------------------------------
# Disable job seeding in production webservice mode
SEED_JOB_ON_BOOT=false

# -------------------------------
# Database Pool Configuration (Replit PostgreSQL)
# -------------------------------
# Optimized for Replit's connection handling
PG_MAX=10
PG_MIN=2
PG_IDLE_TIMEOUT_MS=30000
