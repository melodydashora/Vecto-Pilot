# Change Analysis - 2026-01-10

## Deep Architecture Audit - 2026-01-10

**Audit completed:** Full codebase ETL deep analysis
**Memory file:** `.serena/memories/refactor-audit-2026-01-10.md`

### Work Completed This Session

#### 1. Event Field Naming Refactoring ✅
- Renamed `event_date` → `event_start_date`
- Renamed `event_time` → `event_start_time`
- Creates symmetric naming with `event_end_date`/`event_end_time`
- Updated: schema, backend, frontend, tests (57/57 passing)

#### 2. P0 Documentation Fixes ✅
Fixed critical doc/schema mismatches:
- `README.md:150` - Users table no longer claims to have location data
- `docs/architecture/database-schema.md:7` - Users described as "Session Tracking" not "Location Authority"
- `server/api/location/snapshot.js:67` - Comment now correctly states coords_cache not users
- `server/api/location/README.md:44` - Removed non-existent /api/users/location endpoint
- `server/lib/ai/coach-dal.js:82` - Comment corrected to reference snapshots table

#### 3. Architecture Audit Findings Documented
Found and documented in pending.md:
- **P1**: 4 duplicate coords key functions (need consolidation)
- **P1**: 2 calculateIsOpen functions with different signatures (need renaming)
- **P2**: 9 files bypassing LLM adapters with direct API calls
- **P3**: MULTI_STRATEGY_ENABLED can silently disable pipeline

---

## 2026-01-10 Analysis

**Generated:** 2026-01-10T00:39:28.089Z
**Branch:** main
**Last Commit:** b13da7df Docs: Regenerate DATA_FLOW_MAP.json with latest codebase state

### Uncommitted Changes (15)
| File | Status |
|------|--------|
| `claude/settings.local.json` | Modified |
| `docs/review-queue/2026-01-09.md` | Modified |
| `docs/review-queue/pending.md` | Modified |
| `scripts/db-detox.js` | Modified |
| `server/lib/ai/providers/consolidator.js` | Modified |
| `server/lib/briefing/briefing-service.js` | Modified |
| `server/logger/workflow.js` | Modified |
| `server/scripts/sync-events.mjs` | Modified |
| `tests/README.md` | Modified |
| `.serena/memories/decision_model_agnostic_naming_2026_01_10.md` | Untracked |
| `.serena/memories/etl_deep_analysis_2026_01_10.md` | Untracked |
| `docs/architecture/etl-pipeline-refactoring-2026-01-09.md` | Untracked |
| `server/lib/events/` | Untracked |
| `server/lib/location/getSnapshotTimeContext.js` | Untracked |
| `tests/events/` | Untracked |

### Recent Commit Changes (14)
| File | Status |
|------|--------|
| `client/src/README.md` | Modified |
| `client/src/components/BarsDataGrid.tsx` | Modified |
| `client/src/components/_future/MarketIntelligenceBlocks.tsx` | Modified |
| `client/src/contexts/auth-context.tsx` | Modified |
| `client/src/contexts/co-pilot-context.tsx` | Modified |
| `client/src/contexts/location-context-clean.tsx` | Modified |
| `client/src/hooks/useStrategyPolling.ts` | Modified |
| `client/src/pages/co-pilot/MapPage.tsx` | Modified |
| `client/src/pages/co-pilot/StrategyPage.tsx` | Modified |
| `client/src/utils/co-pilot-helpers.ts` | Modified |
| `docs/DATA_FLOW_MAP.json` | Modified |
| `docs/review-queue/2026-01-09.md` | Added |
| `docs/review-queue/pending.md` | Modified |
| `server/middleware/auth.js` | Modified |

### Documentation Review Needed

#### High Priority
- [ ] `docs/preflight/ai-models.md` - AI model/adapter changes (server/lib/ai/providers/consolidator.js)
- [ ] `docs/architecture/ai-pipeline.md` - AI model/adapter changes (server/lib/ai/providers/consolidator.js)
- [ ] `docs/preflight/location.md` - Location/GPS changes (server/lib/location/getSnapshotTimeContext.js)
- [ ] `docs/architecture/constraints.md` - Location/GPS changes (server/lib/location/getSnapshotTimeContext.js)

#### Medium Priority
- [ ] `docs/architecture/client-structure.md` - Component changes (client/src/components/BarsDataGrid.tsx)

### Status: PENDING

---

## 2026-01-10 Analysis

**Generated:** 2026-01-10T00:45:29.740Z
**Branch:** main
**Last Commit:** a60e3216 Feat: ETL Pipeline refactoring with canonical modules and 7-point audit

### Uncommitted Changes (4)
| File | Status |
|------|--------|
| `claude/settings.local.json` | Modified |
| `.serena/memories/decision_model_agnostic_naming_2026_01_10.md` | Untracked |
| `.serena/memories/etl_deep_analysis_2026_01_10.md` | Untracked |
| `.serena/memories/etl_refactoring_session_2026_01_10.md` | Untracked |

### Recent Commit Changes (29)
| File | Status |
|------|--------|
| `client/src/components/BarsDataGrid.tsx` | Modified |
| `client/src/components/_future/MarketIntelligenceBlocks.tsx` | Modified |
| `client/src/contexts/auth-context.tsx` | Modified |
| `client/src/contexts/co-pilot-context.tsx` | Modified |
| `client/src/contexts/location-context-clean.tsx` | Modified |
| `client/src/hooks/useStrategyPolling.ts` | Modified |
| `client/src/pages/co-pilot/MapPage.tsx` | Modified |
| `client/src/pages/co-pilot/StrategyPage.tsx` | Modified |
| `client/src/utils/co-pilot-helpers.ts` | Modified |
| `docs/DATA_FLOW_MAP.json` | Modified |
| `docs/architecture/etl-pipeline-refactoring-2026-01-09.md` | Added |
| `docs/review-queue/2026-01-09.md` | Modified |
| `docs/review-queue/2026-01-10.md` | Added |
| `docs/review-queue/pending.md` | Modified |
| `scripts/db-detox.js` | Modified |
| `server/lib/ai/providers/consolidator.js` | Modified |
| `server/lib/briefing/briefing-service.js` | Modified |
| `server/lib/events/pipeline/README.md` | Added |
| `server/lib/events/pipeline/hashEvent.js` | Added |
| `server/lib/events/pipeline/normalizeEvent.js` | Added |
| ... and 9 more | |

### Documentation Review Needed

#### High Priority
- [ ] `docs/preflight/ai-models.md` - AI model/adapter changes (server/lib/ai/providers/consolidator.js)
- [ ] `docs/architecture/ai-pipeline.md` - AI model/adapter changes (server/lib/ai/providers/consolidator.js)
- [ ] `docs/preflight/location.md` - Location/GPS changes (server/lib/location/getSnapshotTimeContext.js)
- [ ] `docs/architecture/constraints.md` - Location/GPS changes (server/lib/location/getSnapshotTimeContext.js)

#### Medium Priority
- [ ] `docs/architecture/client-structure.md` - Component changes (client/src/components/BarsDataGrid.tsx)

#### Low Priority
- [ ] Consider adding documentation - New file added (server/lib/events/pipeline/hashEvent.js)
- [ ] Consider adding documentation - New file added (server/lib/events/pipeline/normalizeEvent.js)
- [ ] Consider adding documentation - New file added (server/lib/events/pipeline/types.js)
- [ ] Consider adding documentation - New file added (server/lib/events/pipeline/validateEvent.js)
- [ ] Consider adding documentation - New file added (tests/events/pipeline.test.js)

### Status: PENDING

---

## 2026-01-10 Analysis

**Generated:** 2026-01-10T01:02:47.712Z
**Branch:** main
**Last Commit:** a60e3216 Feat: ETL Pipeline refactoring with canonical modules and 7-point audit

### Uncommitted Changes (14)
| File | Status |
|------|--------|
| `claude/settings.local.json` | Modified |
| `ARCHITECTURE.md` | Modified |
| `CLAUDE.md` | Modified |
| `docs/architecture/ai-pipeline.md` | Modified |
| `docs/review-queue/2026-01-09.md` | Modified |
| `docs/review-queue/2026-01-10.md` | Modified |
| `docs/review-queue/pending.md` | Modified |
| `sent-to-strategist.txt` | Modified |
| `server/README.md` | Modified |
| `server/lib/README.md` | Modified |
| `.serena/memories/architectural_fixes_roadmap_2026_01_10.md` | Untracked |
| `.serena/memories/decision_model_agnostic_naming_2026_01_10.md` | Untracked |
| `.serena/memories/etl_deep_analysis_2026_01_10.md` | Untracked |
| `.serena/memories/etl_refactoring_session_2026_01_10.md` | Untracked |

### Recent Commit Changes (29)
| File | Status |
|------|--------|
| `client/src/components/BarsDataGrid.tsx` | Modified |
| `client/src/components/_future/MarketIntelligenceBlocks.tsx` | Modified |
| `client/src/contexts/auth-context.tsx` | Modified |
| `client/src/contexts/co-pilot-context.tsx` | Modified |
| `client/src/contexts/location-context-clean.tsx` | Modified |
| `client/src/hooks/useStrategyPolling.ts` | Modified |
| `client/src/pages/co-pilot/MapPage.tsx` | Modified |
| `client/src/pages/co-pilot/StrategyPage.tsx` | Modified |
| `client/src/utils/co-pilot-helpers.ts` | Modified |
| `docs/DATA_FLOW_MAP.json` | Modified |
| `docs/architecture/etl-pipeline-refactoring-2026-01-09.md` | Added |
| `docs/review-queue/2026-01-09.md` | Modified |
| `docs/review-queue/2026-01-10.md` | Added |
| `docs/review-queue/pending.md` | Modified |
| `scripts/db-detox.js` | Modified |
| `server/lib/ai/providers/consolidator.js` | Modified |
| `server/lib/briefing/briefing-service.js` | Modified |
| `server/lib/events/pipeline/README.md` | Added |
| `server/lib/events/pipeline/hashEvent.js` | Added |
| `server/lib/events/pipeline/normalizeEvent.js` | Added |
| ... and 9 more | |

### Documentation Review Needed

#### High Priority
- [ ] `docs/preflight/ai-models.md` - AI model/adapter changes (server/lib/ai/providers/consolidator.js)
- [ ] `docs/architecture/ai-pipeline.md` - AI model/adapter changes (server/lib/ai/providers/consolidator.js)
- [ ] `docs/preflight/location.md` - Location/GPS changes (server/lib/location/getSnapshotTimeContext.js)
- [ ] `docs/architecture/constraints.md` - Location/GPS changes (server/lib/location/getSnapshotTimeContext.js)

#### Medium Priority
- [ ] `docs/architecture/client-structure.md` - Component changes (client/src/components/BarsDataGrid.tsx)

#### Low Priority
- [ ] Consider adding documentation - New file added (server/lib/events/pipeline/hashEvent.js)
- [ ] Consider adding documentation - New file added (server/lib/events/pipeline/normalizeEvent.js)
- [ ] Consider adding documentation - New file added (server/lib/events/pipeline/types.js)
- [ ] Consider adding documentation - New file added (server/lib/events/pipeline/validateEvent.js)
- [ ] Consider adding documentation - New file added (tests/events/pipeline.test.js)

### Status: PENDING

---

## 2026-01-10 Analysis

**Generated:** 2026-01-10T01:53:00.442Z
**Branch:** main
**Last Commit:** 75785eae Docs: Update documentation for ETL pipeline and validation rules

### Uncommitted Changes (43)
| File | Status |
|------|--------|
| `claude/settings.local.json` | Modified |
| `README.md` | Modified |
| `client/src/components/BriefingTab.tsx` | Modified |
| `client/src/components/EventsComponent.tsx` | Modified |
| `client/src/components/MapTab.tsx` | Modified |
| `client/src/components/RideshareIntelTab.tsx` | Modified |
| `client/src/pages/co-pilot/MapPage.tsx` | Modified |
| `client/src/utils/co-pilot-helpers.ts` | Modified |
| `docs/DATABASE_SCHEMA.md` | Modified |
| `docs/DOC_DISCREPANCIES.md` | Modified |
| `docs/architecture/database-schema.md` | Modified |
| `docs/review-queue/2026-01-10.md` | Modified |
| `docs/review-queue/pending.md` | Modified |
| `scripts/generate-schema-docs.js` | Modified |
| `sent-to-strategist.txt` | Modified |
| `server/api/briefing/briefing.js` | Modified |
| `server/api/location/README.md` | Modified |
| `server/api/location/snapshot.js` | Modified |
| `server/jobs/event-sync-job.js` | Modified |
| `server/lib/ai/coach-dal.js` | Modified |
| ... and 23 more | |

### Recent Commit Changes (31)
| File | Status |
|------|--------|
| `ARCHITECTURE.md` | Modified |
| `CLAUDE.md` | Modified |
| `client/src/components/BarsDataGrid.tsx` | Modified |
| `client/src/components/BriefingTab.tsx` | Modified |
| `client/src/components/_future/MarketIntelligenceBlocks.tsx` | Modified |
| `client/src/pages/co-pilot/BriefingPage.tsx` | Modified |
| `client/src/pages/co-pilot/MapPage.tsx` | Modified |
| `client/src/pages/co-pilot/StrategyPage.tsx` | Modified |
| `client/src/utils/co-pilot-helpers.ts` | Modified |
| `docs/DATA_FLOW_MAP.json` | Modified |
| `docs/architecture/ai-pipeline.md` | Modified |
| `docs/architecture/etl-pipeline-refactoring-2026-01-09.md` | Added |
| `docs/review-queue/2026-01-09.md` | Modified |
| `docs/review-queue/2026-01-10.md` | Added |
| `docs/review-queue/pending.md` | Modified |
| `scripts/db-detox.js` | Modified |
| `server/README.md` | Modified |
| `server/lib/README.md` | Modified |
| `server/lib/ai/providers/consolidator.js` | Modified |
| `server/lib/briefing/briefing-service.js` | Modified |
| ... and 11 more | |

### Documentation Review Needed

#### High Priority
- [ ] `docs/preflight/ai-models.md` - AI model/adapter changes (server/lib/ai/coach-dal.js)
- [ ] `docs/architecture/ai-pipeline.md` - AI model/adapter changes (server/lib/ai/coach-dal.js)
- [ ] `docs/architecture/database-schema.md` - Database schema changes (shared/schema.js)
- [ ] `docs/preflight/database.md` - Database schema changes (shared/schema.js)
- [ ] `docs/architecture/constraints.md` - Location/GPS changes (server/lib/location/getSnapshotTimeContext.js)

#### Medium Priority
- [ ] `docs/architecture/client-structure.md` - Component changes (client/src/components/BriefingTab.tsx)
- [ ] `docs/architecture/api-reference.md` - Briefing API changes (server/api/briefing/briefing.js)
- [ ] `docs/preflight/location.md` - Venue logic changes (server/lib/venue/event-matcher.js)

#### Low Priority
- [ ] docs/architecture/server-structure.md - Background job changes (server/jobs/event-sync-job.js)
- [ ] Consider adding documentation - New file added (server/lib/events/pipeline/hashEvent.js)
- [ ] Consider adding documentation - New file added (server/lib/events/pipeline/normalizeEvent.js)
- [ ] Consider adding documentation - New file added (server/lib/events/pipeline/types.js)
- [ ] Consider adding documentation - New file added (server/lib/events/pipeline/validateEvent.js)
- [ ] Consider adding documentation - New file added (tests/events/pipeline.test.js)

### Status: PENDING

---

## 2026-01-10 Analysis

**Generated:** 2026-01-10T02:30:24.259Z
**Branch:** main
**Last Commit:** bcd82ab8 Audit: Comprehensive architecture audit + hardening protocol

### Uncommitted Changes (1)
| File | Status |
|------|--------|
| `LAUDE.md` | Modified |

### Recent Commit Changes (61)
| File | Status |
|------|--------|
| `.claude/settings.local.json` | Modified |
| `.serena/memories/architectural_fixes_roadmap_2026_01_10.md` | Added |
| `.serena/memories/comprehensive_audit_2026_01_10.md` | Added |
| `.serena/memories/decision_model_agnostic_naming_2026_01_10.md` | Added |
| `.serena/memories/etl-deep-analysis-file-audit-2026-01-10.md` | Added |
| `.serena/memories/etl_deep_analysis_2026_01_10.md` | Added |
| `.serena/memories/etl_refactoring_session_2026_01_10.md` | Added |
| `.serena/memories/refactor-audit-2026-01-10.md` | Added |
| `ARCHITECTURE.md` | Modified |
| `CLAUDE.md` | Modified |
| `README.md` | Modified |
| `client/src/components/BriefingTab.tsx` | Modified |
| `client/src/components/EventsComponent.tsx` | Modified |
| `client/src/components/MapTab.tsx` | Modified |
| `client/src/components/RideshareIntelTab.tsx` | Modified |
| `client/src/pages/co-pilot/BriefingPage.tsx` | Modified |
| `client/src/pages/co-pilot/MapPage.tsx` | Modified |
| `client/src/utils/co-pilot-helpers.ts` | Modified |
| `docs/DATABASE_SCHEMA.md` | Modified |
| `docs/DATA_FLOW_MAP.json` | Modified |
| ... and 41 more | |

### Documentation Review Needed

#### High Priority
- [ ] `docs/preflight/ai-models.md` - AI model/adapter changes (server/lib/ai/coach-dal.js)
- [ ] `docs/architecture/ai-pipeline.md` - AI model/adapter changes (server/lib/ai/coach-dal.js)
- [ ] `docs/preflight/location.md` - Location/GPS changes (server/lib/location/getSnapshotTimeContext.js)
- [ ] `docs/architecture/constraints.md` - Location/GPS changes (server/lib/location/getSnapshotTimeContext.js)

#### Medium Priority
- [ ] `docs/architecture/client-structure.md` - Component changes (client/src/components/BriefingTab.tsx)
- [ ] `docs/architecture/api-reference.md` - Briefing API changes (server/api/briefing/briefing.js)
- [ ] `docs/architecture/database-schema.md` - Database connection changes (server/db/migrations/2026-01-10-rename-event-fields.sql)
- [ ] `docs/preflight/database.md` - Database connection changes (server/db/migrations/2026-01-10-rename-event-fields.sql)

#### Low Priority
- [ ] Consider adding documentation - New file added (scripts/check-standards.js)
- [ ] docs/architecture/server-structure.md - Background job changes (server/jobs/event-sync-job.js)
- [ ] Consider adding documentation - New file added (server/lib/events/pipeline/hashEvent.js)
- [ ] Consider adding documentation - New file added (server/lib/events/pipeline/normalizeEvent.js)
- [ ] Consider adding documentation - New file added (server/lib/events/pipeline/types.js)
- [ ] Consider adding documentation - New file added (server/lib/events/pipeline/validateEvent.js)
- [ ] Consider adding documentation - New file added (tests/events/pipeline.test.js)

### Status: PENDING

---

## 2026-01-10 Analysis

**Generated:** 2026-01-10T03:50:43.456Z
**Branch:** main
**Last Commit:** 9fbd22ba Fix: D-014 Gap Fixes + D-018 + D-004 (Country Code ISO)

### Recent Commit Changes (70)
| File | Status |
|------|--------|
| `.claude/settings.local.json` | Modified |
| `.serena/memories/architectural_fixes_roadmap_2026_01_10.md` | Added |
| `.serena/memories/comprehensive_audit_2026_01_10.md` | Added |
| `.serena/memories/decision_model_agnostic_naming_2026_01_10.md` | Added |
| `.serena/memories/etl-deep-analysis-file-audit-2026-01-10.md` | Added |
| `.serena/memories/etl_deep_analysis_2026_01_10.md` | Added |
| `.serena/memories/etl_refactoring_session_2026_01_10.md` | Added |
| `.serena/memories/hardening-4-phase-plan-2026-01-10.md` | Added |
| `.serena/memories/refactor-audit-2026-01-10.md` | Added |
| `CLAUDE.md` | Modified |
| `LESSONS_LEARNED.md` | Modified |
| `README.md` | Modified |
| `SYSTEM_MAP.md` | Modified |
| `client/src/components/BriefingTab.tsx` | Modified |
| `client/src/components/EventsComponent.tsx` | Modified |
| `client/src/components/MapTab.tsx` | Modified |
| `client/src/components/RideshareIntelTab.tsx` | Modified |
| `client/src/hooks/useBarsQuery.ts` | Modified |
| `client/src/pages/co-pilot/MapPage.tsx` | Modified |
| `client/src/utils/co-pilot-helpers.ts` | Modified |
| ... and 50 more | |

### Documentation Review Needed

#### High Priority
- [ ] `docs/preflight/ai-models.md` - AI model/adapter changes (server/lib/ai/coach-dal.js)
- [ ] `docs/architecture/ai-pipeline.md` - AI model/adapter changes (server/lib/ai/coach-dal.js)

#### Medium Priority
- [ ] `docs/architecture/client-structure.md` - Component changes (client/src/components/BriefingTab.tsx)
- [ ] `docs/architecture/api-reference.md` - Briefing API changes (server/api/briefing/briefing.js)
- [ ] `docs/architecture/database-schema.md` - Database connection changes (server/db/migrations/2026-01-10-rename-event-fields.sql)
- [ ] `docs/preflight/database.md` - Database connection changes (server/db/migrations/2026-01-10-rename-event-fields.sql)
- [ ] `docs/preflight/location.md` - Venue logic changes (server/lib/venue/event-matcher.js)

#### Low Priority
- [ ] Consider adding documentation - New file added (scripts/check-standards.js)
- [ ] docs/architecture/server-structure.md - Background job changes (server/jobs/event-sync-job.js)

### Status: PENDING

---

## 2026-01-10 Analysis

**Generated:** 2026-01-10T04:32:29.022Z
**Branch:** main
**Last Commit:** 9fbd22ba Fix: D-014 Gap Fixes + D-018 + D-004 (Country Code ISO)

### Uncommitted Changes (7)
| File | Status |
|------|--------|
| `claude/settings.local.json` | Modified |
| `docs/DOC_DISCREPANCIES.md` | Modified |
| `docs/review-queue/2026-01-10.md` | Modified |
| `docs/review-queue/pending.md` | Modified |
| `docs/reviewed-queue/CHANGES.md` | Modified |
| `server/api/location/location.js` | Modified |
| `.serena/memories/d014_d018_audit_verification_2026_01_10.md` | Untracked |

### Recent Commit Changes (70)
| File | Status |
|------|--------|
| `.claude/settings.local.json` | Modified |
| `.serena/memories/architectural_fixes_roadmap_2026_01_10.md` | Added |
| `.serena/memories/comprehensive_audit_2026_01_10.md` | Added |
| `.serena/memories/decision_model_agnostic_naming_2026_01_10.md` | Added |
| `.serena/memories/etl-deep-analysis-file-audit-2026-01-10.md` | Added |
| `.serena/memories/etl_deep_analysis_2026_01_10.md` | Added |
| `.serena/memories/etl_refactoring_session_2026_01_10.md` | Added |
| `.serena/memories/hardening-4-phase-plan-2026-01-10.md` | Added |
| `.serena/memories/refactor-audit-2026-01-10.md` | Added |
| `CLAUDE.md` | Modified |
| `LESSONS_LEARNED.md` | Modified |
| `README.md` | Modified |
| `SYSTEM_MAP.md` | Modified |
| `client/src/components/BriefingTab.tsx` | Modified |
| `client/src/components/EventsComponent.tsx` | Modified |
| `client/src/components/MapTab.tsx` | Modified |
| `client/src/components/RideshareIntelTab.tsx` | Modified |
| `client/src/hooks/useBarsQuery.ts` | Modified |
| `client/src/pages/co-pilot/MapPage.tsx` | Modified |
| `client/src/utils/co-pilot-helpers.ts` | Modified |
| ... and 50 more | |

### Documentation Review Needed

#### High Priority
- [ ] `docs/architecture/api-reference.md` - API endpoint changes (server/api/location/location.js)
- [ ] `docs/preflight/ai-models.md` - AI model/adapter changes (server/lib/ai/coach-dal.js)
- [ ] `docs/architecture/ai-pipeline.md` - AI model/adapter changes (server/lib/ai/coach-dal.js)

#### Medium Priority
- [ ] `docs/architecture/client-structure.md` - Component changes (client/src/components/BriefingTab.tsx)
- [ ] `docs/architecture/database-schema.md` - Database connection changes (server/db/migrations/2026-01-10-rename-event-fields.sql)
- [ ] `docs/preflight/database.md` - Database connection changes (server/db/migrations/2026-01-10-rename-event-fields.sql)
- [ ] `docs/preflight/location.md` - Venue logic changes (server/lib/venue/event-matcher.js)

#### Low Priority
- [ ] Consider adding documentation - New file added (scripts/check-standards.js)
- [ ] docs/architecture/server-structure.md - Background job changes (server/jobs/event-sync-job.js)

### Status: PENDING

---

## 2026-01-10 Analysis

**Generated:** 2026-01-10T06:36:19.569Z
**Branch:** main
**Last Commit:** d487a47e CRITICAL: Root cause fix for venue pipeline data quality issues

### Uncommitted Changes (12)
| File | Status |
|------|--------|
| `erver/api/location/location.js` | Modified |
| `server/api/location/snapshot.js` | Modified |
| `server/api/strategy/blocks-fast.js` | Modified |
| `server/api/strategy/content-blocks.js` | Modified |
| `server/lib/location/README.md` | Modified |
| `server/lib/venue/venue-enrichment.js` | Modified |
| `server/lib/venue/venue-utils.js` | Modified |
| `server/validation/transformers.js` | Modified |
| `.serena/memories/strategy-pipeline-audit-2026-01-10.md` | Untracked |
| `docs/plans/CONSOLIDATED_CLEANUP_2026-01-10.md` | Untracked |
| `migrations/20260110_fix_strategy_now_notify.sql` | Untracked |
| `server/lib/location/coords-key.js` | Untracked |

### Recent Commit Changes (40)
| File | Status |
|------|--------|
| `.claude/settings.local.json` | Modified |
| `.serena/memories/d014_d018_audit_verification_2026_01_10.md` | Added |
| `LESSONS_LEARNED.md` | Modified |
| `LEXICON.md` | Modified |
| `SYSTEM_MAP.md` | Modified |
| `client/src/hooks/useBarsQuery.ts` | Modified |
| `docs/AUDIT_LEDGER.md` | Added |
| `docs/DATABASE_SCHEMA.md` | Modified |
| `docs/DATA_FLOW_MAP.json` | Modified |
| `docs/DOC_DISCREPANCIES.md` | Modified |
| `docs/architecture/authentication.md` | Modified |
| `docs/architecture/strategy-framework.md` | Modified |
| `docs/review-queue/2026-01-10.md` | Modified |
| `docs/review-queue/pending.md` | Modified |
| `docs/reviewed-queue/CHANGES.md` | Modified |
| `scripts/create-all-tables.sql` | Modified |
| `scripts/venue-data-cleanup.js` | Added |
| `server/api/README.md` | Modified |
| `server/api/coach/schema.js` | Modified |
| `server/api/location/location.js` | Modified |
| ... and 20 more | |

### Documentation Review Needed

#### High Priority
- [ ] `docs/architecture/api-reference.md` - API endpoint changes (server/api/location/snapshot.js)
- [ ] `docs/architecture/strategy-framework.md` - Strategy API changes (server/api/strategy/blocks-fast.js)
- [ ] `docs/architecture/constraints.md` - Location/GPS changes (server/lib/location/coords-key.js)

#### Medium Priority
- [ ] `docs/preflight/location.md` - Venue logic changes (server/lib/venue/venue-enrichment.js)
- [ ] `docs/architecture/client-structure.md` - Hook changes (client/src/hooks/useBarsQuery.ts)
- [ ] `docs/architecture/database-schema.md` - Database connection changes (server/db/migrations/2026-01-10-d013-places-cache-rename.sql)
- [ ] `docs/preflight/database.md` - Database connection changes (server/db/migrations/2026-01-10-d013-places-cache-rename.sql)

#### Low Priority
- [ ] Consider adding documentation - New file added (scripts/venue-data-cleanup.js)

### Status: PENDING

---

## 2026-01-10 Analysis

**Generated:** 2026-01-10T06:45:27.753Z
**Branch:** main
**Last Commit:** d487a47e CRITICAL: Root cause fix for venue pipeline data quality issues

### Uncommitted Changes (19)
| File | Status |
|------|--------|
| `ocs/DOC_DISCREPANCIES.md` | Modified |
| `docs/review-queue/2026-01-10.md` | Modified |
| `docs/review-queue/pending.md` | Modified |
| `sent-to-strategist.txt` | Modified |
| `server/api/location/location.js` | Modified |
| `server/api/location/snapshot.js` | Modified |
| `server/api/strategy/README.md` | Modified |
| `server/api/strategy/blocks-fast.js` | Modified |
| `server/api/strategy/content-blocks.js` | Modified |
| `server/lib/location/README.md` | Modified |
| `server/lib/strategy/README.md` | Modified |
| `server/lib/venue/venue-enrichment.js` | Modified |
| `server/lib/venue/venue-utils.js` | Modified |
| `server/validation/README.md` | Modified |
| `server/validation/transformers.js` | Modified |
| `.serena/memories/strategy-pipeline-audit-2026-01-10.md` | Untracked |
| `docs/plans/CONSOLIDATED_CLEANUP_2026-01-10.md` | Untracked |
| `migrations/20260110_fix_strategy_now_notify.sql` | Untracked |
| `server/lib/location/coords-key.js` | Untracked |

### Recent Commit Changes (40)
| File | Status |
|------|--------|
| `.claude/settings.local.json` | Modified |
| `.serena/memories/d014_d018_audit_verification_2026_01_10.md` | Added |
| `LESSONS_LEARNED.md` | Modified |
| `LEXICON.md` | Modified |
| `SYSTEM_MAP.md` | Modified |
| `client/src/hooks/useBarsQuery.ts` | Modified |
| `docs/AUDIT_LEDGER.md` | Added |
| `docs/DATABASE_SCHEMA.md` | Modified |
| `docs/DATA_FLOW_MAP.json` | Modified |
| `docs/DOC_DISCREPANCIES.md` | Modified |
| `docs/architecture/authentication.md` | Modified |
| `docs/architecture/strategy-framework.md` | Modified |
| `docs/review-queue/2026-01-10.md` | Modified |
| `docs/review-queue/pending.md` | Modified |
| `docs/reviewed-queue/CHANGES.md` | Modified |
| `scripts/create-all-tables.sql` | Modified |
| `scripts/venue-data-cleanup.js` | Added |
| `server/api/README.md` | Modified |
| `server/api/coach/schema.js` | Modified |
| `server/api/location/location.js` | Modified |
| ... and 20 more | |

### Documentation Review Needed

#### High Priority
- [ ] `docs/architecture/api-reference.md` - API endpoint changes (server/api/location/location.js)
- [ ] `docs/architecture/strategy-framework.md` - Strategy API changes (server/api/strategy/blocks-fast.js)
- [ ] `docs/architecture/constraints.md` - Location/GPS changes (server/lib/location/coords-key.js)

#### Medium Priority
- [ ] `docs/preflight/location.md` - Venue logic changes (server/lib/venue/venue-enrichment.js)
- [ ] `docs/architecture/client-structure.md` - Hook changes (client/src/hooks/useBarsQuery.ts)
- [ ] `docs/architecture/database-schema.md` - Database connection changes (server/db/migrations/2026-01-10-d013-places-cache-rename.sql)
- [ ] `docs/preflight/database.md` - Database connection changes (server/db/migrations/2026-01-10-d013-places-cache-rename.sql)

#### Low Priority
- [ ] Consider adding documentation - New file added (scripts/venue-data-cleanup.js)

### Status: PENDING

---

## 2026-01-10 Analysis

**Generated:** 2026-01-10T07:34:45.811Z
**Branch:** main
**Last Commit:** dd3a6b6c Fix: D-023 to D-026 UI Casing Drift + MapPage Cache

### Uncommitted Changes (1)
| File | Status |
|------|--------|
| `claude/settings.local.json` | Modified |

### Recent Commit Changes (40)
| File | Status |
|------|--------|
| `.serena/memories/strategy-pipeline-audit-2026-01-10.md` | Added |
| `LESSONS_LEARNED.md` | Modified |
| `LEXICON.md` | Modified |
| `client/src/contexts/README.md` | Modified |
| `client/src/contexts/co-pilot-context.tsx` | Modified |
| `client/src/pages/co-pilot/MapPage.tsx` | Modified |
| `client/src/pages/co-pilot/README.md` | Modified |
| `client/src/pages/co-pilot/StrategyPage.tsx` | Modified |
| `docs/AUDIT_LEDGER.md` | Added |
| `docs/DATABASE_SCHEMA.md` | Modified |
| `docs/DOC_DISCREPANCIES.md` | Modified |
| `docs/architecture/strategy-framework.md` | Modified |
| `docs/plans/CONSOLIDATED_CLEANUP_2026-01-10.md` | Added |
| `docs/review-queue/2026-01-10.md` | Modified |
| `docs/review-queue/pending.md` | Modified |
| `migrations/20260110_fix_strategy_now_notify.sql` | Added |
| `scripts/create-all-tables.sql` | Modified |
| `scripts/venue-data-cleanup.js` | Added |
| `sent-to-strategist.txt` | Modified |
| `server/api/location/location.js` | Modified |
| ... and 20 more | |

### Documentation Review Needed

#### High Priority
- [ ] `docs/architecture/client-structure.md` - Context provider changes (client/src/contexts/co-pilot-context.tsx)
- [ ] `docs/architecture/api-reference.md` - API endpoint changes (server/api/location/location.js)
- [ ] `docs/architecture/strategy-framework.md` - Strategy API changes (server/api/strategy/blocks-fast.js)
- [ ] `docs/preflight/location.md` - Location/GPS changes (server/lib/location/coords-key.js)
- [ ] `docs/architecture/constraints.md` - Location/GPS changes (server/lib/location/coords-key.js)
- [ ] `docs/architecture/ai-pipeline.md` - Strategy pipeline changes (server/lib/strategy/status-constants.js)

#### Medium Priority
- [ ] `docs/architecture/database-schema.md` - Database connection changes (server/db/migrations/2026-01-10-d013-places-cache-rename.sql)
- [ ] `docs/preflight/database.md` - Database connection changes (server/db/migrations/2026-01-10-d013-places-cache-rename.sql)

#### Low Priority
- [ ] Consider adding documentation - New file added (migrations/20260110_fix_strategy_now_notify.sql)
- [ ] Consider adding documentation - New file added (scripts/venue-data-cleanup.js)

### Status: PENDING

---

## 2026-01-10 Analysis

**Generated:** 2026-01-10T08:17:08.737Z
**Branch:** main
**Last Commit:** 31483e0c Docs: Update READMEs for AI and Validation modules

### Uncommitted Changes (8)
| File | Status |
|------|--------|
| `claude/settings.local.json` | Modified |
| `client/src/components/MapTab.tsx` | Modified |
| `client/src/pages/co-pilot/MapPage.tsx` | Modified |
| `docs/DOC_DISCREPANCIES.md` | Modified |
| `docs/review-queue/2026-01-10.md` | Modified |
| `docs/review-queue/pending.md` | Modified |
| `server/validation/transformers.js` | Modified |
| `migrations/20260110_rename_event_columns.sql` | Untracked |

### Recent Commit Changes (9)
| File | Status |
|------|--------|
| `client/src/contexts/co-pilot-context.tsx` | Modified |
| `docs/DOC_DISCREPANCIES.md` | Modified |
| `docs/plans/SINGLE_CONTRACT_PLAN_2026-01-10.md` | Added |
| `server/api/strategy/blocks-fast.js` | Modified |
| `server/lib/ai/README.md` | Modified |
| `server/lib/ai/model-registry.js` | Modified |
| `server/validation/README.md` | Modified |
| `server/validation/response-schemas.js` | Modified |
| `shared/schema.js` | Modified |

### Documentation Review Needed

#### High Priority
- [ ] `docs/architecture/api-reference.md` - Strategy API changes (server/api/strategy/blocks-fast.js)
- [ ] `docs/architecture/strategy-framework.md` - Strategy API changes (server/api/strategy/blocks-fast.js)
- [ ] `docs/preflight/ai-models.md` - AI model/adapter changes (server/lib/ai/model-registry.js)
- [ ] `docs/architecture/ai-pipeline.md` - AI model/adapter changes (server/lib/ai/model-registry.js)
- [ ] `docs/architecture/database-schema.md` - Database schema changes (shared/schema.js)
- [ ] `docs/preflight/database.md` - Database schema changes (shared/schema.js)

#### Medium Priority
- [ ] `docs/architecture/client-structure.md` - Component changes (client/src/components/MapTab.tsx)

### Status: PENDING

---

## 2026-01-10 Analysis

**Generated:** 2026-01-10T08:59:11.882Z
**Branch:** main
**Last Commit:** 3751e52a Fix: D-030 Complete Transformation Layer Overhaul + UI Data Loss Prevention

### Uncommitted Changes (1)
| File | Status |
|------|--------|
| `claude/settings.local.json` | Modified |

### Recent Commit Changes (17)
| File | Status |
|------|--------|
| `client/src/components/MapTab.tsx` | Modified |
| `client/src/contexts/co-pilot-context.tsx` | Modified |
| `client/src/pages/co-pilot/MapPage.tsx` | Modified |
| `docs/DOC_DISCREPANCIES.md` | Modified |
| `docs/review-queue/2026-01-10.md` | Modified |
| `docs/review-queue/pending.md` | Modified |
| `migrations/20260110_rename_event_columns.sql` | Added |
| `server/api/strategy/blocks-fast.js` | Modified |
| `server/api/strategy/content-blocks.js` | Modified |
| `server/lib/ai/README.md` | Modified |
| `server/lib/ai/model-registry.js` | Modified |
| `server/lib/briefing/briefing-service.js` | Modified |
| `server/lib/venue/hours/evaluator.js` | Modified |
| `server/validation/README.md` | Modified |
| `server/validation/response-schemas.js` | Modified |
| `server/validation/transformers.js` | Modified |
| `shared/schema.js` | Modified |

### Documentation Review Needed

#### High Priority
- [ ] `docs/architecture/api-reference.md` - Strategy API changes (server/api/strategy/blocks-fast.js)
- [ ] `docs/architecture/strategy-framework.md` - Strategy API changes (server/api/strategy/blocks-fast.js)
- [ ] `docs/preflight/ai-models.md` - AI model/adapter changes (server/lib/ai/model-registry.js)
- [ ] `docs/architecture/ai-pipeline.md` - AI model/adapter changes (server/lib/ai/model-registry.js)
- [ ] `docs/architecture/database-schema.md` - Database schema changes (shared/schema.js)
- [ ] `docs/preflight/database.md` - Database schema changes (shared/schema.js)

#### Medium Priority
- [ ] `docs/architecture/client-structure.md` - Component changes (client/src/components/MapTab.tsx)
- [ ] `docs/preflight/location.md` - Venue logic changes (server/lib/venue/hours/evaluator.js)

#### Low Priority
- [ ] Consider adding documentation - New file added (migrations/20260110_rename_event_columns.sql)

### Status: PENDING

---

## 2026-01-10 Analysis

**Generated:** 2026-01-10T09:18:36.418Z
**Branch:** main
**Last Commit:** 22c63f4a Fix: Add strict date/time filter at LLM response source

### Uncommitted Changes (4)
| File | Status |
|------|--------|
| `claude/settings.local.json` | Modified |
| `docs/review-queue/2026-01-10.md` | Modified |
| `docs/review-queue/pending.md` | Modified |
| `sent-to-strategist.txt` | Modified |

### Recent Commit Changes (13)
| File | Status |
|------|--------|
| `client/src/components/MapTab.tsx` | Modified |
| `client/src/contexts/co-pilot-context.tsx` | Modified |
| `client/src/pages/co-pilot/MapPage.tsx` | Modified |
| `docs/DOC_DISCREPANCIES.md` | Modified |
| `docs/review-queue/2026-01-10.md` | Modified |
| `docs/review-queue/pending.md` | Modified |
| `migrations/20260110_cleanup_invalid_events.sql` | Added |
| `migrations/20260110_rename_event_columns.sql` | Added |
| `server/api/strategy/blocks-fast.js` | Modified |
| `server/api/strategy/content-blocks.js` | Modified |
| `server/lib/briefing/briefing-service.js` | Modified |
| `server/lib/venue/hours/evaluator.js` | Modified |
| `server/validation/transformers.js` | Modified |

### Documentation Review Needed

#### High Priority
- [ ] `docs/architecture/api-reference.md` - Strategy API changes (server/api/strategy/blocks-fast.js)
- [ ] `docs/architecture/strategy-framework.md` - Strategy API changes (server/api/strategy/blocks-fast.js)

#### Medium Priority
- [ ] `docs/architecture/client-structure.md` - Component changes (client/src/components/MapTab.tsx)
- [ ] `docs/preflight/location.md` - Venue logic changes (server/lib/venue/hours/evaluator.js)

#### Low Priority
- [ ] Consider adding documentation - New file added (migrations/20260110_cleanup_invalid_events.sql)
- [ ] Consider adding documentation - New file added (migrations/20260110_rename_event_columns.sql)

### Status: PENDING

---

## 2026-01-10 Analysis

**Generated:** 2026-01-10T09:31:39.074Z
**Branch:** main
**Last Commit:** ae98754d Fix: Root cause - use canonical event field names throughout (no fallbacks)

### Uncommitted Changes (4)
| File | Status |
|------|--------|
| `claude/settings.local.json` | Modified |
| `docs/review-queue/2026-01-10.md` | Modified |
| `docs/review-queue/pending.md` | Modified |
| `sent-to-strategist.txt` | Modified |

### Recent Commit Changes (5)
| File | Status |
|------|--------|
| `client/src/components/README.md` | Modified |
| `docs/DOC_DISCREPANCIES.md` | Modified |
| `migrations/20260110_cleanup_invalid_events.sql` | Added |
| `server/lib/briefing/briefing-service.js` | Modified |
| `server/lib/strategy/strategy-utils.js` | Modified |

### Documentation Review Needed

#### High Priority
- [ ] `docs/architecture/strategy-framework.md` - Strategy pipeline changes (server/lib/strategy/strategy-utils.js)
- [ ] `docs/architecture/ai-pipeline.md` - Strategy pipeline changes (server/lib/strategy/strategy-utils.js)

#### Low Priority
- [ ] Consider adding documentation - New file added (migrations/20260110_cleanup_invalid_events.sql)

### Status: PENDING

---

## 2026-01-10 Analysis

**Generated:** 2026-01-10T10:04:31.818Z
**Branch:** main
**Last Commit:** 686d0ffe Fix: S-006 Staleness detection + stale barrel exports + fresh briefing pass-through

### Uncommitted Changes (2)
| File | Status |
|------|--------|
| `claude/settings.local.json` | Modified |
| `sent-to-strategist.txt` | Modified |

### Recent Commit Changes (13)
| File | Status |
|------|--------|
| `LESSONS_LEARNED.md` | Modified |
| `client/src/components/README.md` | Modified |
| `docs/DOC_DISCREPANCIES.md` | Modified |
| `docs/review-queue/2026-01-10.md` | Modified |
| `docs/review-queue/pending.md` | Modified |
| `migrations/20260110_cleanup_invalid_events.sql` | Added |
| `server/api/strategy/README.md` | Modified |
| `server/api/strategy/blocks-fast.js` | Modified |
| `server/lib/ai/providers/briefing.js` | Modified |
| `server/lib/ai/providers/consolidator.js` | Modified |
| `server/lib/briefing/briefing-service.js` | Modified |
| `server/lib/external/index.js` | Modified |
| `server/lib/strategy/strategy-utils.js` | Modified |

### Documentation Review Needed

#### High Priority
- [ ] `docs/architecture/api-reference.md` - Strategy API changes (server/api/strategy/blocks-fast.js)
- [ ] `docs/architecture/strategy-framework.md` - Strategy API changes (server/api/strategy/blocks-fast.js)
- [ ] `docs/preflight/ai-models.md` - AI model/adapter changes (server/lib/ai/providers/briefing.js)
- [ ] `docs/architecture/ai-pipeline.md` - AI model/adapter changes (server/lib/ai/providers/briefing.js)

#### Low Priority
- [ ] Consider adding documentation - New file added (migrations/20260110_cleanup_invalid_events.sql)

### Status: PENDING

---

