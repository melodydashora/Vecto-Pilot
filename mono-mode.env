APP_MODE=mono
PORT=5000
DISABLE_SPAWN_SDK=1
DISABLE_SPAWN_AGENT=1
API_PREFIX=/api
AGENT_PREFIX=/agent
WS_PUBLIC_PATH=/agent/ws
SOCKET_IO_PATH=/socket.io
NODE_ENV=production

# -------------------------------
# Strategy Pipeline Roles
# -------------------------------
STRATEGY_STRATEGIST=claude-sonnet-4-5-20250929
STRATEGY_BRIEFER=gemini-2.5-pro
STRATEGY_CONSOLIDATOR=gpt-5

# -------------------------------
# Strategist Parameters (Claude)
# -------------------------------
STRATEGY_STRATEGIST_MAX_TOKENS=1024
STRATEGY_STRATEGIST_TEMPERATURE=0.2

# -------------------------------
# Briefer Parameters (Gemini)
# -------------------------------
STRATEGY_BRIEFER_MAX_TOKENS=8192
STRATEGY_BRIEFER_TEMPERATURE=0.7
STRATEGY_BRIEFER_TOP_P=0.95
STRATEGY_BRIEFER_TOP_K=40

# -------------------------------
# Consolidator Parameters (GPT-5)
# -------------------------------
STRATEGY_CONSOLIDATOR_MAX_TOKENS=20000
STRATEGY_CONSOLIDATOR_REASONING_EFFORT=medium

# Neon PostgreSQL (persistent, $20/month, no sleep)
DATABASE_URL="postgresql://neondb_owner:npg_g83xmlUKGSVy@ep-fancy-snow-ah3jjx69-pooler.c-3.us-east-1.aws.neon.tech/neondb?sslmode=require"
PG_USE_SHARED_POOL="true"

# Non-pooled connection for migrations (remove -pooler suffix)
DATABASE_URL_UNPOOLED="postgresql://neondb_owner:npg_g83xmlUKGSVy@ep-fancy-snow-ah3jjx69.c-3.us-east-1.aws.neon.tech/neondb?sslmode=require"

PG_MAX=10
PG_MIN=2
PG_IDLE_TIMEOUT_MS=120000
PG_CONNECTION_TIMEOUT_MS=10000
PG_KEEPALIVE=true
PG_KEEPALIVE_DELAY_MS=30000
PG_MAX_USES=7500

ENABLE_BACKGROUND_WORKER=true
USE_LISTEN_MODE=false

# Lock settings for strategy generation worker
LOCK_TTL_MS=9000
HEARTBEAT_MS=3000
WORKER_ID="replit:primary"

# Bootstrap: seed a job on boot if queue is empty (for testing)
SEED_JOB_ON_BOOT=true
